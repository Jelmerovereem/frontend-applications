(this.webpackJsonpdatavis=this.webpackJsonpdatavis||[]).push([[0],{14:function(t,e,r){},15:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r(2),c=r(6),i=r.n(c),o=r(1),s=r.n(o),u=r(7);function l(){return(l=Object(u.a)(s.a.mark((function t(e){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var d=r(5),p=r(3);function f(t,e,r){var n=[];e.forEach((function(e){var r=t.find((function(t){return t.areaid===e.areaId}));if(void 0===r)var a={areaId:e.areaId,long:e.long,lat:e.lat,areaDesc:"onbekend"};else a={areaId:e.areaId,long:e.long,lat:e.lat,areaDesc:r.areadesc};n.push(a)}));return n=function(t,e){return t.length>2e3?e.forEach((function(e){var r=t.find((function(t){return t.areaid===e.areaId}));void 0===r||void 0===r.usageid?e.paid="onbekend":e.paid=r.usageid})):e.forEach((function(e){var r=t.find((function(t){return t.areaid===e.areaId}));void 0===r||void 0===r.capacity?e.capacity="onbekend":e.capacity=r.capacity})),e}(r,n)}var h=r(3).geoMercator().center([5.116667,52.17]).scale(6e3).translate([600,300]),v=r(3);function j(t){v.select("svg");var e=v.select(".overallGroup"),r=document.querySelector(".variable-dropdown");e.selectAll("circle").data(t,(function(t){return t.areaId})).join((function(t){return t.append("circle").attr("r",4).attr("transform",(function(t){return"translate(".concat(h([t.long,t.lat]),")")})).attr("fill",(function(t){return"paid/free"===r.value?/VERGUNNING|VERGUNP|VERGUN-ALG|VERGUN-MV/.test(t.paid)?"red":/BETAALDP|GARAGEP/.test(t.paid)?"orange":/onbekend/.test(t.paid)?"grey":"green":"capacity"===r.value?t.capacity<=600?"red":t.capacity>600&&t.capacity<=1e3?"orange":t.capacity>1e3?"green":"grey":void 0})).attr("opacity",(function(t){return"paid/free"===r.value?/onbekend/.test(t.paid)?.1:1:"capacity"===r.value?"onbekend"===t.capacity?.1:1:void 0}))}),(function(t){return t.attr("fill","white").call((function(t){return t.transition().duration(500).attr("opacity",0).remove()}))}));var n=document.querySelector(".tooltip");e.selectAll("circle").on("mouseover",(function(t,e){n.innerHTML=e.areaDesc+"<br>",void 0===e.paid?n.innerHTML+="capacity: "+e.capacity:n.innerHTML+="Paid/free: "+e.paid,n.style.left=t.pageX+"px",n.style.top=t.pageY+10+"px",n.classList.add("focus"),n.style.opacity="1"})).on("mouseout",(function(){n.style.opacity="0"}))}function b(t){var e=t.target.value;"capacity"===e?(document.querySelector(".first").innerText="0",document.querySelector(".last").innerText="1700",j(f(m,y,x))):"paid/free"===e&&(document.querySelector(".first").innerText="Betalen",document.querySelector(".last").innerText="Gratis",fetch("https://opendata.rdw.nl/resource/adw6-9hsg.json?$limit=8352&$$app_token=zI34snM8XBhNRzxL50vrTeOLA").then((function(t){return t.json()})).then((function(t){j(f(m,y,t))})))}function g(t){var e=t.text;return Object(n.jsx)("h1",{children:e})}var m,x,y,O=function(){return Object(n.jsx)("div",{className:"tooltip"})},N=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("select",{name:"variable",className:"variable-dropdown",onChange:b,children:[Object(n.jsx)("option",{value:"capacity",children:"Capacity"}),Object(n.jsx)("option",{value:"paid/free",children:"Paid/free"})]}),Object(n.jsxs)("div",{className:"bar-container",children:[Object(n.jsx)("div",{className:"bar"}),Object(n.jsxs)("div",{className:"baraxis",children:[Object(n.jsx)("p",{className:"first",children:"0"}),Object(n.jsx)("p",{className:"last",children:"1700"})]})]})]})},w=function(t){t.chrildren;var e=t.width,r=t.height;return Object(n.jsx)("svg",{width:e,height:r,children:Object(n.jsx)("g",{})})},k=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{children:["Source visualization: ",Object(n.jsx)("a",{href:"https://curran.github.io/dataviz-course-2018/",children:"Curran dataviz 2018"})]}),Object(n.jsxs)("p",{children:["Source data: ",Object(n.jsx)("a",{href:"https://opendata.rdw.nl/browse?category=Parkeren&provenance=official",children:"RDW Opendata"})]})]})};r(14),r(5),r(3),document.getElementById("root"),window.innerWidth,window.innerHeight;var A=function(){return Object(a.useEffect)((function(){(function(t){return l.apply(this,arguments)})("https://cartomap.github.io/nl/wgs84/gemeente_2020.topojson").then((function(t){!function(t){var e=d.feature(t,t.objects.gemeente_2020),r=p.select("svg"),n=r.append("g").attr("class","overallGroup"),a=+r.attr("width"),c=+r.attr("height");r.call(p.zoom().on("zoom",(function(t){var e=t.transform;n.attr("transform",e),e.k<=2?n.selectAll("circle").transition().duration(500).attr("r",4):e.k>2&&e.k<=4?n.selectAll("circle").transition().duration(500).attr("r",2):e.k>4&&e.k<=10?n.selectAll("circle").transition().duration(500).attr("r",.5):e.k>10&&e.k<=30?n.selectAll("circle").transition().duration(500).attr("r",.3):e.k>30&&n.selectAll("circle").transition().duration(500).attr("r",.1)})));var i=p.geoMercator().center([5.116667,52.17]).scale(6e3).translate([a/2,c/2]),o=p.geoPath().projection(i);n.selectAll("path").data(e.features).enter().append("path").attr("d",o),n.selectAll("text").data(e.features).enter().append("svg:text").text((function(t){return t.properties.statnaam})).attr("fill","white").attr("x",(function(t){return o.centroid(t)[0]})).attr("y",(function(t){return o.centroid(t)[1]})).attr("text-anchor","middle").attr("font-size","1pt"),n.selectAll("path").append("title").text((function(t){return t.properties.statnaam}))}(t)})),Promise.all([fetch("https://opendata.rdw.nl/resource/adw6-9hsg.json?$limit=8352&$$app_token=zI34snM8XBhNRzxL50vrTeOLA").then((function(t){return t.json()})),fetch("https://opendata.rdw.nl/resource/b3us-f26s.json?$limit=1567&$$app_token=zI34snM8XBhNRzxL50vrTeOLA").then((function(t){return t.json()})),fetch("https://opendata.rdw.nl/resource/nsk3-v9n7.json?$limit=6101&$$app_token=zI34snM8XBhNRzxL50vrTeOLA").then((function(t){return t.json()}))]).then((function(t){m=t[0],x=t[1],y=function(t){function e(t){var e=t.split(" ")[0],r=function(t,e,r){var n=t;return e.forEach((function(t){return n=function(t,e,r){return t.split(e).join(r)}(n,t,r)})),n}(t,[e+" (","(",")",","],"").split(" ");if("POINT"===e)r=[Number(r[0]),Number(r[1])];else{var n=0,a=0;r.forEach((function(t,e){return 0===e||e%2===0?a+=Number(t):n+=Number(t)})),r=[a/(r.length/2),n/(r.length/2)]}return r}var r=[];return t.forEach((function(t){var n;""!==t.areageometryastext&&void 0!==t.areageometryastext&&(Number.isNaN(e(t.areageometryastext)[0])&&Number.isNaN(e(t.areageometryastext)[1])||(n={areaId:t.areaid,long:e(t.areageometryastext)[0],lat:e(t.areageometryastext)[1]},r.push(n)))})),r}(y=t[2]),j(f(m,y,x))}))})),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(O,{}),Object(n.jsx)(g,{text:"What is the best way to park in the city throughout the Netherlands?"}),Object(n.jsx)(N,{}),Object(n.jsx)(w,{width:1200,height:600}),Object(n.jsx)(k,{})]})};i.a.render(Object(n.jsx)(A,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.25a7f5e8.chunk.js.map