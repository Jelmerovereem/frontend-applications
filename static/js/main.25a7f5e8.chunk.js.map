{"version":3,"sources":["modules/fetchData.js","modules/createMap.js","modules/combineData.js","modules/projection.js","modules/renderCircles.js","modules/updateData.js","components/visTitle.js","components/tooltip.js","App.js","components/legend.js","components/svgContainer.js","components/sources.js","modules/addCoordinates.js","index.js"],"names":["url","a","fetch","result","json","resultJSON","topojson","require","d3","combineData","garageData","garageLocatieData","variableData","outcomeData","forEach","garage","find","obj","areaid","areaId","undefined","garageObj","long","lat","areaDesc","areadesc","push","garagesData","length","paidObj","usageid","paid","capacityObj","capacity","checkOption","projection","geoMercator","center","scale","translate","renderCircles","coordinates","select","group","dropdown","document","querySelector","selectAll","data","d","join","enter","append","attr","value","test","exit","call","transition","duration","remove","tooltip","on","event","innerHTML","style","left","pageX","top","pageY","classList","add","opacity","updateData","variable","target","innerText","capacityData","then","response","paidData","VisTitle","text","Tooltip","className","Legend","name","onChange","SvgContainer","chrildren","width","height","Sources","href","getElementById","window","innerWidth","innerHeight","App","useEffect","fetchData","mapData","stadData","feature","objects","gemeente_2020","svg","zoom","transform","k","pathGenerator","geoPath","features","properties","statnaam","centroid","createMap","Promise","all","getCenterCoord","type","split","longLat","string","replaceArray","replaceBy","replaceString","r","replace","replaceOccurences","replaceMultipleOccurences","Number","latTotal","longTotal","x","index","coordinatesArray","coordinateObj","areageometryastext","isNaN","addCoordinates","ReactDOM","render"],"mappings":"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","file":"static/js/main.25a7f5e8.chunk.js","sourcesContent":["export default async function fetchData(url) {\r\n\tconst result = await fetch(url)\r\n\tconst resultJSON = await result.json()\r\n\treturn resultJSON\r\n}","const topojson = require(\"topojson-client\");\r\nconst d3 = require('d3');\r\n\r\nexport default function createMap(mapData) {\r\n\tconst stadData = topojson.feature(mapData, mapData.objects.gemeente_2020);\r\n\tconst svg = d3.select(\"svg\");\r\n\tconst group = svg.append(\"g\").attr(\"class\", \"overallGroup\");\r\n\tconst width = +svg.attr(\"width\");\r\n\tconst height = +svg.attr(\"height\");\r\n\r\n\tsvg.call(d3.zoom().on(\"zoom\", ({transform}) => {\r\n\t\tgroup.attr(\"transform\", transform);\r\n\t\tif (transform.k <= 2) {\r\n\t\t\tgroup.selectAll(\"circle\")\r\n\t\t\t.transition()\r\n\t\t\t\t.duration(500)\r\n\t\t\t\t.attr(\"r\", 4)\r\n\t\t} else if (transform.k >2 && transform.k <= 4) {\r\n\t\t\tgroup.selectAll(\"circle\")\r\n\t\t\t.transition()\r\n\t\t\t\t.duration(500)\r\n\t\t\t\t.attr(\"r\", 2)\r\n\t\t} else if (transform.k > 4 && transform.k <= 10) {\r\n\t\t\tgroup.selectAll(\"circle\")\r\n\t\t\t.transition()\r\n\t\t\t\t.duration(500)\r\n\t\t\t\t.attr(\"r\", 0.5)\t\r\n\t\t} else if (transform.k > 10 && transform.k <= 30) {\r\n\t\t\tgroup.selectAll(\"circle\")\r\n\t\t\t.transition()\r\n\t\t\t\t.duration(500)\r\n\t\t\t\t.attr(\"r\", 0.3)\r\n\t\t} else if (transform.k > 30 ) {\r\n\t\t\tgroup.selectAll(\"circle\")\r\n\t\t\t.transition()\r\n\t\t\t\t.duration(500)\r\n\t\t\t\t.attr(\"r\", 0.1)\r\n\t\t}\r\n\t}))\r\n\r\n\tconst projection = d3.geoMercator()\r\n\t\t.center([5.116667, 52.17]) // https://github.com/mbergevoet/frontend-data/blob/master/frontend-data/index.js#L61\r\n\t\t.scale(6000)\r\n\t\t.translate([width/2, height/2]); // center the map based on the width and height from the svg element;\r\n\tconst pathGenerator = d3.geoPath().projection(projection);\r\n\r\n\tgroup.selectAll(\"path\")\r\n\t\t.data(stadData.features)\r\n\t\t.enter()\r\n\t\t.append(\"path\")\r\n\t\t.attr(\"d\", pathGenerator)\r\n\r\n\r\n\tgroup.selectAll(\"text\")\r\n\t\t.data(stadData.features)\r\n\t\t.enter()\r\n\t\t.append(\"svg:text\")\r\n\t\t\t.text(obj => obj.properties.statnaam)\r\n\t\t\t.attr(\"fill\", \"white\")\r\n\t\t\t.attr(\"x\", d => pathGenerator.centroid(d)[0])\r\n\t\t\t.attr(\"y\", d => pathGenerator.centroid(d)[1])\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.attr(\"font-size\", \"1pt\")\r\n\r\n\t/* Add title tooltip */\r\n\tgroup.selectAll(\"path\")\r\n\t.append(\"title\")\r\n\t\t.text(obj => obj.properties.statnaam)\r\n}","export default function combineData(garageData, garageLocatieData, variableData) {\r\n\tlet outcomeData = [];\r\n\t// add garage names to objects\r\n\t\tgarageLocatieData.forEach((garage) => {\r\n\t\t\tvar result = garageData.find(obj => {\r\n\t\t\t\treturn obj.areaid === garage.areaId;\r\n\t\t\t});\r\n\t\t\tif (result === undefined ) {\r\n\t\t\t\tvar garageObj = {\r\n\t\t\t\t\tareaId: garage.areaId,\r\n\t\t\t\t\tlong: garage.long,\r\n\t\t\t\t\tlat: garage.lat,\r\n\t\t\t\t\tareaDesc: \"onbekend\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar garageObj = {\r\n\t\t\t\t\tareaId: garage.areaId,\r\n\t\t\t\t\tlong: garage.long,\r\n\t\t\t\t\tlat: garage.lat,\r\n\t\t\t\t\tareaDesc: result.areadesc\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\toutcomeData.push(garageObj);\r\n\t\t});\r\n\r\n\t\tconst checkOption = (variableData, garagesData) => {\r\n\t\t\tif (variableData.length > 2000) {\r\n\t\t\t//paid/free dropdown chosen\r\n\t\t\tgaragesData.forEach((garage) => {\r\n\t\t\t\tvar paidObj = variableData.find(obj => {\r\n\t\t\t\t\treturn obj.areaid === garage.areaId;\r\n\t\t\t\t})\r\n\t\t\t\tif (paidObj === undefined || paidObj.usageid === undefined) {\r\n\t\t\t\t\tgarage.paid = \"onbekend\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgarage.paid = paidObj.usageid;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t//capacity dropdown chosen\r\n\t\t\tgaragesData.forEach((garage) => {\r\n\t\t\t\tvar capacityObj = variableData.find(obj => {\r\n\t\t\t\t\treturn obj.areaid === garage.areaId\r\n\t\t\t\t})\r\n\t\t\t\tif (capacityObj === undefined || capacityObj.capacity === undefined) {\r\n\t\t\t\t\tgarage.capacity = \"onbekend\";\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgarage.capacity = capacityObj.capacity;\r\n\t\t\t\t}\t\t\t\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn garagesData;\r\n\t\t}\r\n\r\n\t\toutcomeData = checkOption(variableData, outcomeData);\r\n\t\treturn outcomeData;\r\n}","const d3 = require('d3');\r\n\r\nexport const projection = d3.geoMercator().center([5.116667, 52.17]).scale(6000).translate([1200/2, 600/2]);","import { projection } from \"../modules/projection.js\";\r\nconst d3 = require('d3');\r\n\r\nexport default function renderCircles(coordinates) {\r\n\tconst svg = d3.select(\"svg\");\r\n\tconst group = d3.select(\".overallGroup\");\r\n\tconst dropdown = document.querySelector(\".variable-dropdown\");\r\n\tlet cirlce = group.selectAll(\"circle\");\r\n\r\n\tcirlce\r\n\t\t.data(coordinates, d => d.areaId)\r\n\t\t.join(\r\n\t\t\tenter => enter.append(\"circle\")\r\n\t\t\t\t.attr(\"r\", 4)\r\n\t\t\t\t.attr(\"transform\", (obj) => {\r\n\t\t\t\t\treturn `translate(${projection([obj.long, obj.lat])})`\r\n\t\t\t\t})\r\n\t\t\t\t.attr(\"fill\", (obj) => {\r\n\t\t\t\t\tif (dropdown.value === \"paid/free\") {\r\n\t\t\t\t\t\tif (/VERGUNNING|VERGUNP|VERGUN-ALG|VERGUN-MV/.test(obj.paid)) {\r\n\t\t\t\t\t\t\treturn \"red\"\r\n\t\t\t\t\t\t} else if (/BETAALDP|GARAGEP/.test(obj.paid)) {\r\n\t\t\t\t\t\t\treturn \"orange\"\r\n\t\t\t\t\t\t} else if (/onbekend/.test(obj.paid)) {\r\n\t\t\t\t\t\t\treturn \"grey\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"green\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (dropdown.value === \"capacity\") {\r\n\t\t\t\t\t\tif (obj.capacity <= 600) {\r\n\t\t\t\t\t\t\treturn \"red\"\r\n\t\t\t\t\t\t} else if (obj.capacity > 600 && obj.capacity <= 1000) {\r\n\t\t\t\t\t\t\treturn \"orange\"\r\n\t\t\t\t\t\t} else if (obj.capacity > 1000) {\r\n\t\t\t\t\t\t\treturn \"green\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn \"grey\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.attr(\"opacity\", (d) => {\r\n\t\t\t\t\tif (dropdown.value === \"paid/free\") {\r\n\t\t\t\t\t\tif (/onbekend/.test(d.paid)) {\r\n\t\t\t\t\t\t\treturn .1\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (dropdown.value === \"capacity\") {\r\n\t\t\t\t\t\tif (d.capacity === \"onbekend\") {\r\n\t\t\t\t\t\t\treturn .1\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\texit => exit\r\n\t\t\t\t\t.attr(\"fill\", \"white\")\r\n\t\t\t\t\t.call(exit => exit.transition().duration(500)\r\n\t\t\t\t\t\t.attr(\"opacity\", 0)\r\n\t\t\t\t\t\t.remove())\t\t\t\r\n\t\t\t)\r\n\r\n\t\tconst tooltip = document.querySelector(\".tooltip\");\r\n\r\n\t\tgroup.selectAll(\"circle\").on(\"mouseover\", (event, obj) => {\r\n\t\t\ttooltip.innerHTML = obj.areaDesc + \"<br>\";\r\n\t\t\tif (obj.paid === undefined) {\r\n\t\t\t\ttooltip.innerHTML += \"capacity: \" + obj.capacity;\t\r\n\t\t\t} else {\r\n\t\t\t\ttooltip.innerHTML += \"Paid/free: \" + obj.paid;\t\r\n\t\t\t}\r\n\t\t\ttooltip.style.left = (event.pageX) + \"px\";\r\n\t\t\ttooltip.style.top = (event.pageY + 10) + \"px\";\r\n\t\t\ttooltip.classList.add(\"focus\");\r\n\t\t\ttooltip.style.opacity = \"1\";\t\t\r\n\t\t})\r\n\t\t.on(\"mouseout\", () => {\r\n\t\t\ttooltip.style.opacity = \"0\";\r\n\t\t});\r\n}","import {garageData, capacityData, garageLocatieData} from \"../App.js\";\r\nimport combineData from \"../modules/combineData.js\";\r\nimport renderCircles from \"../modules/renderCircles.js\";\r\n\r\nexport default function updateData(event) {\r\n\tconst variable = event.target.value;\r\n\tif (variable === \"capacity\") {\r\n\t\tdocument.querySelector(\".first\").innerText = \"0\";\r\n\t\tdocument.querySelector(\".last\").innerText = \"1700\";\r\n\t\tlet combinedData = combineData(garageData, garageLocatieData, capacityData);\r\n\t\trenderCircles(combinedData)\r\n\t} else if (variable === \"paid/free\") {\r\n\t\tdocument.querySelector(\".first\").innerText = \"Betalen\";\r\n\t\tdocument.querySelector(\".last\").innerText = \"Gratis\";\r\n\t\tfetch('https://opendata.rdw.nl/resource/adw6-9hsg.json?$limit=8352&$$app_token=zI34snM8XBhNRzxL50vrTeOLA')\r\n\t\t.then(response => response.json())\r\n\t\t.then((paidData) => {\r\n\t\t\tlet combinedData = combineData(garageData, garageLocatieData, paidData);\r\n\t\t\trenderCircles(combinedData)\r\n\t\t})\r\n\t}\r\n}","export default function VisTitle({text}) {\r\n\treturn (\r\n\t\t<h1>{text}</h1>\r\n\t\t)\r\n}","export const Tooltip = () => {\r\n\treturn (<div className=\"tooltip\"></div>)\r\n}","import React, { useState, useRef, useEffect } from 'react';\nimport fetchData from \"./modules/fetchData.js\";\nimport createMap from \"./modules/createMap.js\";\nimport addCoordinates from \"./modules/addCoordinates.js\";\nimport combineData from \"./modules/combineData.js\";\nimport renderCircles from \"./modules/renderCircles.js\";\nimport updateData from \"./modules/updateData.js\";\nimport VisTitle from \"./components/visTitle.js\";\nimport { Tooltip } from \"./components/tooltip.js\";\nimport { Legend } from \"./components/legend.js\";\nimport { SvgContainer } from \"./components/svgContainer.js\";\nimport { Sources } from \"./components/sources.js\";\nimport './App.css';\nimport { feature } from \"topojson-client\";\nconst d3 = require('d3')\n\nconst root = document.getElementById('root')\nconst width = window.innerWidth\nconst heigth = window.innerHeight\n\nconst visTitleText = \"What is the best way to park in the city throughout the Netherlands?\";\nconst geoMapData = \"https://cartomap.github.io/nl/wgs84/gemeente_2020.topojson\";\nexport const garagesData = \"https://opendata.rdw.nl/resource/adw6-9hsg.json?$limit=8352&$$app_token=zI34snM8XBhNRzxL50vrTeOLA\";\nexport const garagesCapacityData = \"https://opendata.rdw.nl/resource/b3us-f26s.json?$limit=1567&$$app_token=zI34snM8XBhNRzxL50vrTeOLA\";\nexport const garagesLocationData = \"https://opendata.rdw.nl/resource/nsk3-v9n7.json?$limit=6101&$$app_token=zI34snM8XBhNRzxL50vrTeOLA\";\n\nexport let garageData;\nexport let capacityData;\nexport let garageLocatieData;\n\nfunction App() {\n\n  useEffect(() => {\n    fetchData(geoMapData).then(result => {\n      createMap(result)\n    })\n\n    Promise.all([\n      fetch(garagesData).then(response => response.json()),\n      fetch(garagesCapacityData).then(response => response.json()),\n      fetch(garagesLocationData).then(response => response.json())\n      ]).then((result) => {\n        garageData = result[0];\n        capacityData = result[1];\n        garageLocatieData = result[2];\n        garageLocatieData = addCoordinates(garageLocatieData);\n\n        const outcomeData = combineData(garageData, garageLocatieData, capacityData);\n\n        renderCircles(outcomeData);\n      })\n\n  })\n\n  return (\n    <>\n      <Tooltip />\n      <VisTitle text={visTitleText} />\n      <Legend />\n      <SvgContainer width={1200} height={600} />\n      <Sources />\n    </>\n  );\n}\n\nexport default App;","import updateData from \"../modules/updateData.js\";\r\n\r\nexport const Legend = () => {\r\n\treturn (\r\n\t\t<>\r\n\t<select name=\"variable\" className=\"variable-dropdown\" onChange={updateData} >\r\n\t\t<option value=\"capacity\">Capacity</option>\r\n\t\t<option value=\"paid/free\">Paid/free</option>\r\n\t</select>\r\n\t<div className=\"bar-container\">\r\n\t\t<div className=\"bar\"></div>\r\n\t\t<div className=\"baraxis\">\r\n\t\t\t<p className=\"first\">0</p>\r\n\t\t\t<p className=\"last\">1700</p>\r\n\t\t</div>\r\n\t</div>\r\n\t</>\r\n\t)\r\n}","export const SvgContainer = ({chrildren, width, height}) => {\r\n\treturn (\r\n\t\t<svg width={width} height={height}>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t</svg>\r\n\t\t)\r\n}","export const Sources = () => {\r\n\treturn (\r\n\t\t<>\r\n\t<p>Source visualization: <a href=\"https://curran.github.io/dataviz-course-2018/\">Curran dataviz 2018</a></p>\r\n\t<p>Source data: <a href=\"https://opendata.rdw.nl/browse?category=Parkeren&provenance=official\">RDW Opendata</a></p>\r\n\t</>\r\n\t)\r\n}","export default function addCoordinates(garageLocatieData) {\r\n\t// from Stan Brankras  https://github.com/StanBankras/functional-programming/blob/56585a9b63601b68de3bcc3b26050b85ca05cf5e/utils.js#L36-L54\r\n\tfunction replaceOccurences(string, replace, replaceBy) {\r\n\t    return string.split(replace).join(replaceBy);\r\n\t}\r\n\r\n\tfunction replaceMultipleOccurences(string, replaceArray, replaceBy) {\r\n\t    let replaceString = string;\r\n\t    replaceArray.forEach((r) => replaceString = replaceOccurences(replaceString, r, replaceBy));\r\n\t    return replaceString;\r\n\t}\r\n\r\n\tfunction getCenterCoord(coordinates) {\r\n\r\n\t    const type = coordinates.split(' ')[0];\r\n\t    let longLat = replaceMultipleOccurences(coordinates, [type + ' (', '(', ')', ','], '').split(' ');\r\n\t    if (type === 'POINT') {\r\n\t        longLat = [Number(longLat[0]), Number(longLat[1])];\r\n\t    } else {\r\n\t        let latTotal = 0;\r\n\t        let longTotal = 0;\r\n\r\n\t        longLat.forEach((x, index) => {\r\n\t            if (index === 0 || index % 2 === 0) return longTotal += Number(x);\r\n\t            return latTotal += Number(x);\r\n\t        });\r\n\r\n\t        longLat = [longTotal / (longLat.length / 2), latTotal / (longLat.length / 2)];\r\n\t    }\r\n\r\n\t    return longLat;\r\n\r\n\r\n\t}\r\n\r\n\tlet coordinatesArray = [];\r\n\tgarageLocatieData.forEach((garage) => {\r\n\t\tlet coordinateObj;\r\n\t\tif (garage.areageometryastext !== \"\" && garage.areageometryastext !== undefined) {\r\n\t\t\tif (!Number.isNaN(getCenterCoord(garage.areageometryastext)[0]) || !Number.isNaN(getCenterCoord(garage.areageometryastext)[1])) {\r\n\t\t\tcoordinateObj = {\r\n\t\t\t\tareaId: garage.areaid,\r\n\t\t\t\tlong: getCenterCoord(garage.areageometryastext)[0],\r\n\t\t\t\tlat: getCenterCoord(garage.areageometryastext)[1]\r\n\t\t\t}\r\n\t\t\tcoordinatesArray.push(coordinateObj)\r\n\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\treturn coordinatesArray;\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}